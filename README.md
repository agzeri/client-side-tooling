# Modern Tooling

This repo contains a step by step guide installing all dependencies to write Modern JavaScript in the browser.

## Steps

###### You need to create a folder project, and inside it start typing the next guide. For example: I’ll be working in a folder called `github-clone`.

#### 1. Create the folder and go inside.
```sh
$ mkdir github-clone
$ cd github-clone
```

###### Now, we’ll need to install dependencies (_javascript libraries_) and save the exact version.

#### 2. Create an empty `package.json` file using the next command:
```sh
$ npm init -y
```

###### We use `-y` to skip questions from initialization.

That instruction will create a `package.json` file in your project with the similar next configuration:

```json
{
  "name": "github-clone",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

#### 3. Install `webpack`, this is the main JavaScript library to read JavaScript modules (files) and merge them into one.
```sh
$ npm install --save-dev webpack@3
```

###### NOTE: We can use `npm i` instead of `npm install` for short. And `--save-dev` flag is just to save the library name and version in `package.json`.

After running the last command, our `package.json` will look like this:

```diff
{
  "name": "github-clone",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
+ "devDependencies": {
+   "webpack": "^3.11.0"
+ }
}
```

#### 4. Create a `src` folder inside current directory, you can use other name. And a `main.js` file.

```sh
$ mkdir src
$ touch src/main.js
```

#### 5. In `main.js`, just add the below code:

```js
import addTwo from './addTwo'

console.log(addTwo(8))
```

#### 6. Create the `addTwo.js` file and add the next code:

```js

function addTwo(n) {
  return n + 2
}

export default addTwo
```

#### 7. Now, add a script in `package.json` to run `webpack` from terminal. Replace `test` command for `build`.

```diff
  "scripts": {
-    "test": "echo \"Error: no test specified\" && exit 1"
+    "build": "webpack"
  },
```

###### Now, we have the power to run in the terminal:
This is not going to work because we haven’t created our `webpack.config.js` file.

```sh
$ npm run build
```

#### 8. Create a `webpack.config.js` file in root project.

```sh
$ touch webpack.config.js
```

#### 9. Add the next configuration object into `webpack.config.js`:

```js
/**
 * [1] We are importing the `library` and saving into a variable
 *     called `generateFile`
 * [2] This is the path where you can find the main javascript
 *     file.
 * [3] This is the path where `webpack` it’s going to save the
 *     merged file.
 * [4] Just the name, `webpack` will generate the new file using
 *     the name.
 * [5] Better debugging in Browser Console.
 * [6] This means that `webpack` will find all files that ends
 *     with `.js` extension.
 * [7] Because of point [6], we need to exclude files from
 *     `node_modules` folder
 * [8] This is the webpack plugin to understand babel and load
 *     configuration
 * [9] It’s a property to configure all plugins
 * [10] We are configuring the index.html, using the `generateFile`
 *      function, we pass a title and the file name. This will
 *      create an `index.html` inside `/dist/` folder, and inject
 *      automatically our `main.min.js` file generated by webpack.
 * [11] To create a server we take advantage of webpack server
 *      plugin and we only specify with `contentBase` property which
 *      will be the folder to mount in `localhost:8080`.
 */
const generateFile = require('html-webpack-plugin') // [1]

module.exports = {
  entry: './src/main.js', // [2]
  output: {
    path: __dirname + '/dist', // [3]
    filename: './[name].min.js' // [4]
  },
  devtool: 'source-map', // [5]
  module: {
    rules: [
      {
        test: /\.js$/, // [6]
        exclude: /node_modules/, // [7]
        use: {
          loader: 'babel-loader' // [8]
        }
      }
    ]
  },
  // [9]
  plugins: [
    // [10]
    new generateFile({
      title: 'GitHub',
      filename: 'index.html'
    })
  ],
  // [11]
  devServer: {
    contentBase: './dist'
  }
}

```

#### 10. We have our configuration file created, but we haven’t install the libraries. What does it mean? It’s not going to work.

```sh
$ npm i --save-dev html-webpack-plugin babel-core babel-preset-env babel-loader webpack-dev-server@2
```

#### 11. Create a `.babelrc` file to save babel configuration.

```sh
$ touch .babelrc
```

###### Paste the below configuration into `.babelrc`

```json
{
  "presets": ["env"]
}
```

#### 10. Now, we can run in our terminal `npm run build`, and this time it will work.
```sh
$ npm run build
```

#### 11. Create a `dev` script in `package.json`

```diff
  "scripts": {
    "build": "webpack",
+   "dev": "webpack-dev-server"
  },
```

#### 12. In your terminal run `npm run dev`
```sh
$ npm run dev
```

###### Open in the browser `localhost:8080` and you’ll see your app running.

## Notes

+ In development process, it’s normal to have two terminal tabs, one for running the server and the other one for building the new code.
+ Don’t forget to ignore `/dist` and `/node_modules` if you are going to push to GitHub.
```sh
$ touch .gitignore
```

###### Inside `.gitignore`
```sh
/dist
/node_modules
```

## Part II
### Configuring Sass

###### Webpack it’s a JavaScript tool, it only understands JavaScript. So, if we are planning to write Sass we’ll need to add more configuration.

#### 1. Install a webpack plugin to extract CSS from Webpack.

```sh
$ npm install --save-dev extract-text-webpack-plugin
```

#### 2. Call that library inside `webpack.config.js`.

```diff
const generateFile = require('html-webpack-plugin') // [1]
+ const extractCss = require('extract-text-webpack-plugin');
```

#### 3. Configure the `extract-text-webpack-plugin` in `plugins` property.

```diff
// [9]
plugins: [
  // [10]
  new generateFile({
    title: 'GitHub',
    filename: 'index.html'
+ }),
+ new extractCss({
+   filename: 'main.css'
+ })
],
```

#### 4. Install CSS and Sass dependencies using your terminal

```sh
$ npm install --save-dev node-sass css-loader sass-loader
```

#### 5. Now, we have a property called `rules`, inside `module` property. Add another object in `rules` array.

```diff
module: {
  rules: [
    {
      test: /\.js$/, // [6]
      exclude: /node_modules/, // [7]
      use: {
        loader: 'babel-loader' // [8]
      }
+   },
+   {
+     test: /\.scss$/,
+     use: extractCss.extract({
+       use: ['css-loader', 'sass-loader']
+     })
+   }
  ]
},
```

#### 6. Finally, inside `src` folder create your Sass file from the terminal.

```sh
$ touch src/main.scss
```

#### 7. Add the below code to your `.scss` file.

```scss
$red: red;

body {
  background-color: $red;
}
```

#### 8. And the most important line, you need to import those styles so webpack can understand the configuration. Go to your `main.js` —inside `src` folder— and add the next line:

```diff
import addTwo from './addTwo'
+ import './main.scss'

console.log(addTwo(8))
```

## Notes
+ Don’t forget to run your server with `npm run dev` to see the changes.
+ If you inspect the `/dist` folder, now you’ll see a structure like this:
```
+ /dist
   |
   +-- index.html
   |
   +-- main.css
   |
   +-- main.css.map
   |  
   +-- main.min.js
   |
   +-- main.min.js.map
  ```
